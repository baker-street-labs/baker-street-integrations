# Baker Street Labs IPAM Configuration
# IP Address Management System Configuration

# Database Configuration
database:
  host: "localhost"
  port: 5432
  name: "baker_street_ipam"
  user: "ipam_user"
  password: "ipam_password_2025"
  pool_size: 10
  max_overflow: 20
  pool_timeout: 30
  pool_recycle: 3600

# Redis Configuration
redis:
  host: "localhost"
  port: 6380
  db: 1
  password: ""
  timeout: 30
  key_prefix: "ipam:"
  ttl_seconds: 3600

# DNS API Integration
dns_api:
  base_url: "http://10.43.20.75:9090"
  username: "admin"
  password: "admin"
  timeout: 30
  retry_attempts: 3
  retry_delay: 5
  auto_sync: true

# Route Injection Integration
route_injection:
  base_url: "http://localhost:5001"
  api_key: "baker_street_route_injection_key_2025"
  timeout: 30
  retry_attempts: 3
  retry_delay: 5
  auto_inject: true

# Security Configuration
security:
  jwt_secret: "baker_street_ipam_jwt_secret_2025_very_secure"
  jwt_algorithm: "HS256"
  jwt_expire_minutes: 60
  password_hash_rounds: 12
  api_rate_limit: 1000  # requests per hour
  max_login_attempts: 5
  lockout_duration_minutes: 15

# Cyber Range Networks
cyber_range_networks:
  - "10.0.0.0/8"
  - "172.20.0.0/16"
  - "172.21.0.0/16"
  - "192.168.0.0/16"

# Default Subnets (Baker Street Labs Cyber Range)
default_subnets:
  - name: "DMZ Zone"
    network_cidr: "10.0.1.0/24"
    zone: "dmz"
    vlan_id: 100
    gateway: "10.0.1.1"
    dns_servers: ["10.0.1.2", "10.0.1.3"]
    description: "DMZ zone for web servers and mail servers"
  
  - name: "Internal Network"
    network_cidr: "192.168.1.0/24"
    zone: "internal"
    vlan_id: 200
    gateway: "192.168.1.1"
    dns_servers: ["192.168.1.2", "192.168.1.3"]
    description: "Internal network for user workstations and file servers"
  
  - name: "Management Network"
    network_cidr: "172.16.1.0/24"
    zone: "management"
    vlan_id: 300
    gateway: "172.16.1.1"
    dns_servers: ["172.16.1.2", "172.16.1.3"]
    description: "Management network for admin workstations and backup servers"
  
  - name: "User Workstations - Subnet 0"
    network_cidr: "10.0.0.0/24"
    zone: "workstations"
    vlan_id: 400
    gateway: "10.0.0.1"
    dns_servers: ["10.0.0.2", "10.0.0.3"]
    description: "User workstations subnet 0"
  
  - name: "User Workstations - Subnet 1"
    network_cidr: "10.0.1.0/24"
    zone: "workstations"
    vlan_id: 401
    gateway: "10.0.1.1"
    dns_servers: ["10.0.1.2", "10.0.1.3"]
    description: "User workstations subnet 1"
  
  - name: "User Workstations - Subnet 2"
    network_cidr: "10.0.2.0/24"
    zone: "workstations"
    vlan_id: 402
    gateway: "10.0.2.1"
    dns_servers: ["10.0.2.2", "10.0.2.3"]
    description: "User workstations subnet 2"
  
  - name: "User Workstations - Subnet 3"
    network_cidr: "10.0.3.0/24"
    zone: "workstations"
    vlan_id: 403
    gateway: "10.0.3.1"
    dns_servers: ["10.0.3.2", "10.0.3.3"]
    description: "User workstations subnet 3"
  
  - name: "User Workstations - Subnet 4"
    network_cidr: "10.0.4.0/24"
    zone: "workstations"
    vlan_id: 404
    gateway: "10.0.4.1"
    dns_servers: ["10.0.4.2", "10.0.4.3"]
    description: "User workstations subnet 4"
  
  - name: "User Workstations - Subnet 5"
    network_cidr: "10.0.5.0/24"
    zone: "workstations"
    vlan_id: 405
    gateway: "10.0.5.1"
    dns_servers: ["10.0.5.2", "10.0.5.3"]
    description: "User workstations subnet 5"
  
  - name: "User Workstations - Subnet 6"
    network_cidr: "10.0.6.0/24"
    zone: "workstations"
    vlan_id: 406
    gateway: "10.0.6.1"
    dns_servers: ["10.0.6.2", "10.0.6.3"]
    description: "User workstations subnet 6"
  
  - name: "Honeypot Network"
    network_cidr: "10.0.7.0/24"
    zone: "honeypot"
    vlan_id: 500
    gateway: "10.0.7.1"
    dns_servers: ["10.0.7.2", "10.0.7.3"]
    description: "Honeypot network for threat simulation"
  
  - name: "Sinkhole Network"
    network_cidr: "10.0.8.0/24"
    zone: "sinkhole"
    vlan_id: 600
    gateway: "10.0.8.1"
    dns_servers: ["10.0.8.2", "10.0.8.3"]
    description: "Sinkhole network for malicious traffic"
  
  - name: "Forensic Network"
    network_cidr: "10.0.9.0/24"
    zone: "forensic"
    vlan_id: 700
    gateway: "10.0.9.1"
    dns_servers: ["10.0.9.2", "10.0.9.3"]
    description: "Forensic analysis network"

# Device Types
device_types:
  workstations:
    - "windows_workstation"
    - "linux_workstation"
    - "mac_workstation"
  
  servers:
    - "web_server"
    - "mail_server"
    - "file_server"
    - "database_server"
    - "dns_server"
    - "dhcp_server"
    - "ntp_server"
  
  network_devices:
    - "router"
    - "switch"
    - "firewall"
    - "load_balancer"
    - "access_point"
  
  security_tools:
    - "honeypot"
    - "sinkhole"
    - "monitoring_station"
    - "forensic_workstation"
    - "ids_sensor"
    - "ips_sensor"
  
  iot_devices:
    - "camera"
    - "sensor"
    - "printer"
    - "scanner"
    - "smart_device"

# IP Allocation Policies
allocation_policies:
  automatic:
    workstation_ips: "10.0.{1-6}.{100-200}"
    server_ips: "10.0.{1-6}.{10-99}"
    network_ips: "10.0.{1-6}.{1-9}"
    management_ips: "172.16.1.{10-50}"
  
  reserved:
    gateway_ips: "10.0.{1-6}.1"
    dns_ips: "10.0.{1-6}.{2-3}"
    monitoring_ips: "10.0.{1-6}.{4-5}"
    dhcp_ips: "10.0.{1-6}.6"
  
  special:
    honeypot_ips: "10.0.7.0/24"
    sinkhole_ips: "10.0.8.0/24"
    forensic_ips: "10.0.9.0/24"
    lab_ips: "10.100.0.0/16"
    red_team_ips: "10.200.0.0/16"
    blue_team_ips: "10.300.0.0/16"

# Scenario Management
scenarios:
  red_team_exercise:
    name: "Red Team Penetration Test"
    subnets: ["10.100.0.0/16"]
    max_devices: 50
    duration_hours: 4
    cleanup: "automatic"
    description: "Red team penetration testing scenario"
  
  blue_team_training:
    name: "Blue Team Incident Response"
    subnets: ["10.200.0.0/16"]
    max_devices: 30
    duration_hours: 8
    cleanup: "manual"
    description: "Blue team incident response training"
  
  malware_analysis:
    name: "Malware Analysis Lab"
    subnets: ["10.300.0.0/24"]
    max_devices: 10
    duration_hours: 2
    cleanup: "automatic"
    description: "Malware analysis and reverse engineering lab"
  
  network_forensics:
    name: "Network Forensics Investigation"
    subnets: ["10.0.9.0/24"]
    max_devices: 5
    duration_hours: 6
    cleanup: "manual"
    description: "Network forensics and investigation scenario"

# Monitoring Configuration
monitoring:
  enabled: true
  prometheus_port: 9091
  metrics_path: "/metrics"
  health_check_interval: 30
  alert_thresholds:
    ip_utilization_warning: 80
    ip_utilization_critical: 95
    dns_sync_failures: 5
    route_injection_failures: 5
  
  alerts:
    - name: "High IP Utilization"
      condition: "ip_utilization > 80"
      severity: "warning"
      message: "IP utilization is above 80% in subnet {subnet_name}"
    
    - name: "Critical IP Utilization"
      condition: "ip_utilization > 95"
      severity: "critical"
      message: "IP utilization is above 95% in subnet {subnet_name}"
    
    - name: "DNS Sync Failure"
      condition: "dns_sync_failures > 5"
      severity: "warning"
      message: "Multiple DNS sync failures detected"
    
    - name: "Route Injection Failure"
      condition: "route_injection_failures > 5"
      severity: "warning"
      message: "Multiple route injection failures detected"

# Logging Configuration
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "/app/logs/ipam.log"
  max_size_mb: 100
  backup_count: 5
  console: true
  
  # Structured logging for JSON output
  structured: true
  json_format: true
  
  # Log levels for different components
  components:
    database: "INFO"
    dns_api: "INFO"
    route_injection: "INFO"
    redis: "WARNING"
    security: "INFO"

# API Configuration
api:
  host: "0.0.0.0"
  port: 5002
  workers: 4
  reload: false
  access_log: true
  
  # CORS settings
  cors:
    enabled: true
    origins: ["http://localhost:3000", "http://localhost:8080"]
    methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
    headers: ["*"]
  
  # Rate limiting
  rate_limit:
    enabled: true
    requests_per_minute: 100
    burst_size: 20
  
  # Request/Response logging
  request_logging: true
  response_logging: false

# Development Settings
development:
  debug: false
  test_mode: false
  mock_external_apis: false
  log_requests: true
  log_responses: false
  
  # Test data
  create_test_data: false
  test_subnets: 3
  test_devices: 10
  test_ips: 50

# Backup Configuration
backup:
  enabled: true
  frequency: "daily"
  retention_days: 30
  location: "/app/backups"
  
  # Database backup
  database:
    enabled: true
    method: "pg_dump"
    compression: "gzip"
  
  # Configuration backup
  config:
    enabled: true
    method: "file_copy"
    include_logs: false
  
  # Redis backup
  redis:
    enabled: true
    method: "rdb_snapshot"
    compression: "gzip"

# Integration Settings
integrations:
  # Kong API Gateway
  kong:
    enabled: true
    service_name: "baker-street-ipam"
    service_url: "http://localhost:5002"
    route_path: "/api/v1/ipam"
    api_key: "baker_street_ipam_api_key_2025"
  
  # Prometheus Monitoring
  prometheus:
    enabled: true
    scrape_interval: 30
    metrics_path: "/metrics"
    port: 9091
  
  # Grafana Dashboards
  grafana:
    enabled: true
    dashboard_path: "/app/dashboards"
    auto_provision: true
  
  # ELK Stack
  elasticsearch:
    enabled: false
    host: "localhost"
    port: 9200
    index_prefix: "ipam"
  
  logstash:
    enabled: false
    host: "localhost"
    port: 5044
  
  kibana:
    enabled: false
    host: "localhost"
    port: 5601
